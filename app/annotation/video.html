<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Video labeling tool</title>

    <!-- Style CSS -->
    <link href="./css/style.css" rel="stylesheet">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="./fonts/font-awesome-4.7.0/css/font-awesome.min.css">

    <!-- Bootstrap CSS-->
    <link href="./css/bootstrap.css" rel="stylesheet">
    <link href="./css/bootstrap-switch.css" rel="stylesheet">

</head>

<!-- no text highlighting -->
<body class="noselect">

    <div class = "container">

        <!-- Heading -->
        <div id="heading_row" class="row p-0 m-0">
            <div class="col-lg-12">
                <h2 class="page-header">Bounding box labeling tool
                    <small>verson 1.1</small>
                    <a href="#" id="save_btn" style="position:absolute;right:15px;" class="btn btn-primary btn-primary">Save</a>
                </h2>
            </div>
        </div>

        <!-- Toolbox -->
        <div class="row">
            <div class="col-md-2">
                <div class="panel panel-default">
                    <!-- toolbox title -->
                    <div id="toolbox" class="panel-heading active">
                        Toolbox
                    </div>
                    <!-- list of control sections -->
                    <a href="#" class="list-group-item">
                        <!-- label selection controls -->
                        <div class="form-group">
                            <p>Label Category</p>
                            <select id="category_select" size="10" class="form-control">
                                <!-- iterate over object categories -->
                                {{ range $key, $value := .Category }}
                                <option value={{$value}}>{{$value}}</option>
                                {{ end }}
                            </select>
                        </div>
                        <!-- occluded/non-occluded controls -->
                        <div class="form-group">
                            <input type="checkbox" id="occluded_checkbox" name="occluded-checkbox" data-on-color="info" data-on-text="Yes" data-off-text="No" data-size="small" data-label-text="Occluded">
                        </div>
                        <!-- truncated/non-truncated controls -->
                        <div class="form-group">
                            <input type="checkbox" id="truncated_checkbox" name="truncated-checkbox" data-on-color="info" data-on-text="Yes" data-off-text="No" data-size="small" data-label-text="Truncated">
                        </div>
                        <!-- traffic light color control -->
                        <div class="form-group">
                            <p>Traffic Light Color</p>
                            <div id="radios" class="btn-group"
                                 data-toggle="buttons">
                                <label class="btn btn-sm btn-green">
                                    <input type="radio" name="options" id="green"
                                           value="1"/> G
                                </label>
                                <label class="btn btn-sm btn-yellow">
                                    <input type="radio" name="options" id="yellow"
                                           value="42"/> Y
                                </label>
                                <label class="btn btn-sm btn-red">
                                    <input type="radio" name="options" id="red"
                                           value="0"/> R
                                </label>
                                <label class="btn btn-sm btn-white checked">
                                    <input type="radio" name="options" id="none"
                                           value="2"/> NA
                                </label>
                            </div>
                        </div>
                        <!-- object out of frame button -->
                        <a href="#" id="end_btn" class="btn list-group-item">End Object Track</a>
                        <!-- remove button -->
                        <a href="#" id="delete_btn" class="btn list-group-item">Remove</a>
                    </a>
                </div>
            </div>

            <!-- Video Player -->
            <div class="row">
                <!-- anything you can see lives on this canvas -->
                <canvas id="image_canvas" width="900" height="470"></canvas>
                <!-- this canvas stores box id's -->
                <canvas id="hidden_canvas" width="900" height="470"></canvas>
                <!-- mouse crosshair (horizontal and vertical) -->
                <div id="crosshair-h" class="hair"></div>
                <div id="crosshair-v" class="hair"></div>

                <div id="player_controls">
                    <!-- frame counter -->
                    <div id="frame_counter"> 1 </div>
                    <!-- play/pause button -->
                    <button id="play_button" type="button">
                        <!-- button initializes paused, so use the play icon -->
                        <i id="play_button_icon" class="fa fa-play"></i>
                    </button>
                    <!-- video progress slider -->
                    <input id="video_slider" class="slider" type="range" min="1" max="{{ .Metadata.NumFrames }}" value="1"/>
                </div>

            </div>

            <!-- /.row -->
            <div class="row">
                <div id="control_panel">
                    <div class="col-sm-2">
                        <ul class="pagination" id="pagination_control">
                            <li>
                                <a id="prev_btn">
                                    &laquo;
                                </a>
                            </li>
                            <li>
                                <a id="next_btn">
                                    &raquo;
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

        </div>

    </div>

    <!-- TEMPLATE VALUES -->
    <i id="video_name" class="template-val">{{.VideoName}}</i>
    <i id="frame_rate" class="template-val">{{.Metadata.TBR}}</i>
    
    <!-- JAVASCRIPT -->

    <!-- jQuery -->
    <script src="./js/thirdparty/jquery.js"></script>

    <!-- Bootstrap JS -->
    <script src="./js/thirdparty/bootstrap-switch.js"></script>

    <script src="./js/sat.js"></script>

    <!-- manages bounding boxes -->
    <script src="./js/video.js"></script>
    <script src="./js/box2d.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/sprintf/1.1.1/sprintf.min.js"></script>

    <script type="text/javascript">
        document.getElementById('video_name').style.display = "none";
        document.getElementById('frame_rate').style.display = "none";

        $(document).ready(function () {
            const type = "bbox";
            let videoSat = new SatVideo(Box2d);
            // videoSat.load();
            // initialize the occluded/truncated switches with bootstrap
            $('[name=\'occluded-checkbox\']').bootstrapSwitch();
            $('[name=\'truncated-checkbox\']').bootstrapSwitch();
            document.getElementById('save_btn').onclick = function() {
              videoSat.save()
            };
        });

    </script>

</body>

</html>